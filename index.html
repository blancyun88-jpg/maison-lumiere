<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAISON LUMIÈRE — 빛의 집</title>
  <meta name="description" content="MAISON LUMIÈRE. 현대적으로 재해석된 유럽식 빌라, 빛과 그림자가 머무는 고요한 스테이.">

  <!-- Preload critical assets -->
  <link rel="preload" href="img/intro.webp" as="image">
  <link rel="preload" href="style.css" as="style">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600&family=Gowun+Batang:wght@400;700&display=swap"
    rel="stylesheet">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="style.css">

  <!-- Lenis Smooth Scroll -->
  <script src="https://cdn.jsdelivr.net/npm/lenis@1.1.18/dist/lenis.min.js" defer></script>

  <!-- GSAP & Plugins -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js" defer></script>
</head>

<body>

  <!-- Scroll Progress Bar -->
  <div id="scroll-progress" aria-hidden="true"></div>

  <!-- ========================================
       LOADER
  ========================================= -->
  <div id="loader" aria-hidden="true">
    <div class="loader__brand">MAISON LUMIÈRE</div>
    <div class="loader__bar"><span></span></div>
  </div>

  <!-- ========================================
       NAVIGATION
  ========================================= -->
  <nav id="nav" aria-label="Main navigation">
    <a href="#" class="nav__logo">MAISON LUMIÈRE</a>
    <ul class="nav__links">
      <li><a href="#story">Story</a></li>
      <li><a href="#spaces">Spaces</a></li>
      <li><a href="#retreat">Retreat</a></li>
      <li><a href="#reserve" class="nav__reserve">Reserve</a></li>
    </ul>

    <!-- Mobile Burger Button -->
    <button class="nav__burger" aria-label="메뉴 열기" aria-expanded="false">
      <span class="burger__line burger__line--top"></span>
      <span class="burger__line burger__line--bottom"></span>
    </button>
  </nav>

  <!-- ========================================
       MOBILE MENU
  ========================================= -->
  <div class="mobile-menu" aria-hidden="true">
    <div class="mobile-menu__inner">
      <ul class="mobile-menu__links">
        <li><a href="#story">Story</a></li>
        <li><a href="#spaces">Spaces</a></li>
        <li><a href="#retreat">Retreat</a></li>
        <li><a href="#reserve">Reserve</a></li>
      </ul>
      <p class="mobile-menu__brand">MAISON LUMIÈRE</p>
    </div>
  </div>

  <!-- ========================================
       SECTION 01 — INTRO (Hero)
  ========================================= -->
  <section id="intro" class="section section--intro">
    <div class="intro__image-wrap">
      <img src="img/intro.webp" alt="MAISON LUMIÈRE 전경" class="intro__image" loading="eager">
    </div>
    <div class="intro__content">
      <p class="intro__eyebrow">A Private Villa Stay</p>
      <h1 class="intro__title">
        <span class="split-line">MAISON</span>
        <span class="split-line">LUMIÈRE</span>
      </h1>
      <p class="intro__subtitle">빛이 머무는 시간의 집</p>
    </div>
    <div class="scroll-indicator">
      <span>Scroll</span>
      <div class="scroll-indicator__line"></div>
    </div>
  </section>

  <!-- ========================================
       SECTION 02 — GATE (Arch Transition)
  ========================================= -->
  <section id="gate" class="section section--gate">
    <div class="gate__clip-mask">
      <img src="img/gate.webp" alt="아치형 게이트" class="gate__image" loading="lazy">
    </div>
    <div class="gate__text">
      <p class="text-reveal">문을 열면, 시간이 느려집니다.</p>
      <p class="text-reveal">빛은 아치를 따라 흐르고, 그림자는 벽에 기대어 쉽니다.</p>
    </div>
  </section>

  <!-- ========================================
       SECTION 03 — STORY (Courtyard)
  ========================================= -->
  <section id="story" class="section section--story">
    <div class="story__grid">
      <div class="story__images">
        <div class="story__img-wrap story__img-wrap--01">
          <img src="img/courtyard_01.webp" alt="안뜰 전경" class="story__img" loading="lazy">
        </div>
        <div class="story__img-wrap story__img-wrap--02">
          <img src="img/courtyard_02.webp" alt="안뜰 디테일" class="story__img" loading="lazy">
        </div>
      </div>
      <div class="story__text">
        <h2 class="section-title mixed-title">
          <span class="split-line title-script">The</span>
          <span class="split-line title-serif">Courtyard</span>
        </h2>
        <p class="story__body text-reveal">
          이곳의 하루는 안뜰에서 시작됩니다.<br>
          돌 위로 퍼지는 아침 햇살이 커피잔 위에 내려앉을 때,
          비로소 우리는 '머무름'의 의미를 이해하게 됩니다.
          건축이 만든 여백 안에서, 바람조차 제 속도를 잊습니다.
        </p>
      </div>
    </div>
  </section>

  <!-- ========================================
       SECTION 04 — HORIZONTAL SCROLL (Corridor & Rooms)
  ========================================= -->
  <section id="spaces" class="section section--horizontal">
    <div class="horizontal__track">

      <!-- Panel 1: Corridor -->
      <article class="horizontal__panel panel--corridor">
        <div class="panel__image-wrap">
          <img src="img/corridor.webp" alt="복도" class="panel__image" loading="lazy">
        </div>
        <div class="panel__text">
          <h2 class="section-title">
            <span class="split-line">The Corridor</span>
          </h2>
          <p class="text-reveal">
            긴 복도는 단순한 동선이 아닙니다.<br>
            빛의 농도가 달라지는 여정입니다.
          </p>
        </div>
        <!-- Floating detail -->
        <div class="floating-detail floating-detail--01">
          <img src="img/room_detail.webp" alt="객실 디테일" loading="lazy">
        </div>
      </article>

      <!-- Panel 2: Room 01 -->
      <article class="horizontal__panel panel--room01">
        <div class="panel__image-wrap">
          <img src="img/room_01.webp" alt="객실 1" class="panel__image" loading="lazy">
        </div>
        <div class="panel__text">
          <h2 class="section-title">Chambre Première</h2>
          <p class="text-reveal">
            창 너머로 들어오는 오후의 빛이<br>
            린넨 위에 부드러운 그림자를 수놓습니다.
          </p>
        </div>
      </article>

      <!-- Panel 3: Room 02 -->
      <article class="horizontal__panel panel--room02">
        <div class="panel__image-wrap">
          <img src="img/room_02.webp" alt="객실 2" class="panel__image" loading="lazy">
        </div>
        <div class="panel__text">
          <h2 class="section-title">Chambre Seconde</h2>
          <p class="text-reveal">
            이 방은 밤을 위해 설계되었습니다.<br>
            어둠이 내려앉으면, 벽난로의 온기만이 말을 건넵니다.
          </p>
        </div>
        <!-- Floating detail -->
        <div class="floating-detail floating-detail--02">
          <img src="img/bathroom_detail.webp" alt="욕실 디테일" loading="lazy">
        </div>
      </article>

    </div><!-- /.horizontal__track -->
  </section>

  <!-- ========================================
       SECTION 05 — SPA & POOL (물 위의 고요)
  ========================================= -->
  <section id="retreat" class="section section--spa">
    <div class="spa__hero">
      <div class="spa__image-wrap">
        <img src="img/pool_01.webp" alt="수영장" class="spa__image" loading="lazy">
      </div>
      <div class="spa__hero-text">
        <h2 class="section-title mixed-title">
          <span class="split-line title-script">Silence</span>
          <span class="split-line title-serif">on Water</span>
        </h2>
        <p class="text-reveal">
          물은 하늘을 담고, 하늘은 물에 기댑니다.<br>
          이곳의 수영장은 풍경의 일부가 됩니다.
        </p>
      </div>
    </div>
  </section>

  <!-- ========================================
       SECTION 06 — LE BAIN (Bathroom)
  ========================================= -->
  <section id="lebain" class="section section--lebain">
    <div class="lebain__image-wrap">
      <img src="img/bathroom_02.webp" alt="욕실 2" class="lebain__image" loading="lazy">
    </div>
    <div class="lebain__text">
      <h2 class="panel__name">Le Bain</h2>
      <p class="text-reveal">
        대리석 위로 흐르는 물소리.<br>
        이곳에서의 목욕은 하나의 의식입니다.
      </p>
    </div>
  </section>

  <!-- ========================================
       SECTION 07 — SPA DUAL (물의 온도)
  ========================================= -->
  <section class="section section--spa-dual-wrap">
    <div class="spa__dual">
      <div class="spa__dual-item">
        <div class="spa__dual-image-wrap">
          <img src="img/pool_02.webp" alt="풀사이드" class="spa__dual-image" loading="lazy">
        </div>
      </div>
      <div class="spa__dual-item">
        <div class="spa__dual-image-wrap">
          <img src="img/bathroom_01.webp" alt="욕실 1" class="spa__dual-image" loading="lazy">
        </div>
      </div>
      <p class="spa__dual-text text-reveal">
        물의 온도가 바뀌는 순간,<br>
        하루의 서사도 조용히 전환됩니다.
      </p>
    </div>
    <!-- Floating detail -->
    <div class="floating-detail floating-detail--03">
      <img src="img/bathroom_object.webp" alt="욕실 오브제" loading="lazy">
    </div>
  </section>

  <!-- ========================================
       SECTION — AMENITIES
  ========================================= -->
  <section class="section section--amenities">
    <div class="amenities__inner">
      <p class="amenities__eyebrow">What Awaits You</p>

      <div class="amenities__divider">
        <span class="amenities__divider-mark">&#x2767;</span>
      </div>

      <ul class="amenities__list">
        <li class="amenity-item">
          <span class="amenity-num">01</span>
          <span class="amenity-name">Private Heated Pool</span>
          <span class="amenity-kr">전용 온수 수영장</span>
        </li>
        <li class="amenity-item">
          <span class="amenity-num">02</span>
          <span class="amenity-name">Stone Courtyard Garden</span>
          <span class="amenity-kr">석조 안뜰 정원</span>
        </li>
        <li class="amenity-item">
          <span class="amenity-num">03</span>
          <span class="amenity-name">Wood-burning Fireplace</span>
          <span class="amenity-kr">장작 벽난로</span>
        </li>
        <li class="amenity-item">
          <span class="amenity-num">04</span>
          <span class="amenity-name">Marble Soaking Bath</span>
          <span class="amenity-kr">대리석 욕조</span>
        </li>
        <li class="amenity-item">
          <span class="amenity-num">05</span>
          <span class="amenity-name">Private Chef Available</span>
          <span class="amenity-kr">프라이빗 셰프</span>
        </li>
        <li class="amenity-item">
          <span class="amenity-num">06</span>
          <span class="amenity-name">Mountain &amp; Forest Views</span>
          <span class="amenity-kr">산림 조망</span>
        </li>
      </ul>

      <p class="amenities__capacity">2 Bedrooms &nbsp;·&nbsp; Maximum 4 Guests &nbsp;·&nbsp; 280 m²</p>
    </div>
  </section>

  <!-- ========================================
       SECTION 05 — OUTRO (Day to Night Crossfade)
  ========================================= -->
  <section id="outro" class="section section--outro">
    <div class="outro__images">
      <img src="img/outro.webp" alt="낮 풍경" class="outro__day" loading="lazy">
      <img src="img/bluehour.webp" alt="블루아워" class="outro__night" loading="lazy">
    </div>
    <div class="outro__content">
      <p class="outro__logo">MAISON LUMIÈRE</p>
      <p class="outro__tagline text-reveal">빛이 지는 순간에도,<br>이 집은 당신을 기억합니다.</p>
      <a href="#reserve" id="reserve" class="outro__reserve">Reserve Your Stay</a>
    </div>
  </section>

  <!-- ========================================
       FOOTER
  ========================================= -->
  <!-- Custom Cursor -->
  <div class="cursor-follow" aria-hidden="true">
    <span class="cursor-label">Stay</span>
  </div>

  <!-- Shutter Overlay (Fixed — Silence on Water → Le Bain 전환) -->
  <div class="shutter-overlay" aria-hidden="true">
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
    <div class="shutter"></div>
  </div>
  <footer id="footer" class="footer">
    <div class="footer__inner">
      <p class="footer__brand">MAISON LUMIÈRE</p>
      <p class="footer__copy">&copy; 2026 Maison Lumière. All rights reserved.</p>
    </div>
  </footer>

  <!-- ========================================
       SCRIPTS
  ========================================= -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {

      /* ─── Register GSAP Plugin ─── */
      gsap.registerPlugin(ScrollTrigger);

      /* ─── Lenis Smooth Scroll ─── */
      const lenis = new Lenis({
        duration: 1.4,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        smoothWheel: true,
        touchMultiplier: 1.5
      });

      // Sync Lenis with GSAP ScrollTrigger
      lenis.on('scroll', ScrollTrigger.update);
      gsap.ticker.add((time) => lenis.raf(time * 1000));
      gsap.ticker.lagSmoothing(0);

      /* ─── Scroll Progress Bar ─── */
      const progressBar = document.getElementById('scroll-progress');
      if (progressBar) {
        lenis.on('scroll', ({ progress }) => {
          progressBar.style.width = `${progress * 100}%`;
        });
      }

      const ease = 'power4.out';
      const easeSoft = 'power3.out';

      /* ─── Utility: Split text into spans per character ─── */
      function splitTextIntoChars(el) {
        const text = el.textContent;
        el.textContent = '';
        el.setAttribute('aria-label', text);
        text.split('').forEach(char => {
          const span = document.createElement('span');
          span.className = 'char';
          span.textContent = char === ' ' ? '\u00A0' : char;
          span.setAttribute('aria-hidden', 'true');
          el.appendChild(span);
        });
        return el.querySelectorAll('.char');
      }

      /* ─── Utility: Split lines into individual words ─── */
      function splitLineWords(el) {
        const text = el.textContent.trim();
        el.textContent = '';
        el.setAttribute('aria-label', text);
        text.split(/\s+/).forEach((word, i) => {
          const span = document.createElement('span');
          span.className = 'word';
          span.textContent = word;
          span.setAttribute('aria-hidden', 'true');
          if (i > 0) el.appendChild(document.createTextNode(' '));
          el.appendChild(span);
        });
        return el.querySelectorAll('.word');
      }


      /* ═══════════════════════════════════════
         01. LOADER
      ═══════════════════════════════════════ */
      const loader = document.getElementById('loader');
      const loaderBar = loader.querySelector('.loader__bar span');

      // Pause Lenis during loading
      lenis.stop();

      const loaderTl = gsap.timeline({
        onComplete: () => {
          loader.style.display = 'none';
          document.body.classList.add('loaded');
          lenis.start();
          initAnimations();
        }
      });

      loaderTl
        .to(loaderBar, { scaleX: 1, duration: 1.8, ease: 'power2.inOut' })
        .to(loader, { yPercent: -100, duration: 1.2, ease }, '+=0.2');


      /* ═══════════════════════════════════════
         02. MAIN ANIMATION INIT
      ═══════════════════════════════════════ */
      function initAnimations() {

        /* ─── NAV fade in ─── */
        gsap.from('#nav', {
          y: -40, opacity: 0, duration: 1.6, ease: easeSoft, delay: 0.2
        });


        /* ─── INTRO: Title stagger + image scale ─── */
        const introLines = document.querySelectorAll('.intro__content .split-line');
        introLines.forEach(line => {
          const words = splitLineWords(line);
          gsap.from(words, {
            y: 80, opacity: 0,
            duration: 1.6,
            stagger: 0.1,
            ease,
            delay: 0.4
          });
        });

        gsap.from('.intro__eyebrow', {
          y: 30, opacity: 0, duration: 1.4, ease: easeSoft, delay: 0.2
        });

        gsap.from('.intro__subtitle', {
          y: 30, opacity: 0, duration: 1.4, ease: easeSoft, delay: 1.0
        });

        // Intro image scale-up on scroll — smoother scrub
        gsap.to('.intro__image', {
          scale: 1.12,
          ease: 'none',
          scrollTrigger: {
            trigger: '#intro',
            start: 'top top',
            end: 'bottom top',
            scrub: 1.5
          }
        });

        // Intro content fade-out on scroll
        gsap.to('.intro__content', {
          y: -60,
          opacity: 0,
          ease: 'none',
          scrollTrigger: {
            trigger: '#intro',
            start: '20% top',
            end: 'bottom top',
            scrub: 1.5
          }
        });

        // Scroll indicator pulse
        gsap.to('.scroll-indicator__line', {
          scaleY: 1,
          duration: 1.6,
          ease: 'power2.inOut',
          repeat: -1,
          yoyo: true
        });

        // Fade out scroll indicator on scroll
        gsap.to('.scroll-indicator', {
          opacity: 0,
          ease: 'none',
          scrollTrigger: {
            trigger: '#intro',
            start: '5% top',
            end: '20% top',
            scrub: true
          }
        });


        /* ─── GATE: Arch clip-path mask ─── */
        const gateSection = document.querySelector('.section--gate');
        const gateClip = document.querySelector('.gate__clip-mask');

        // Arch shape: starts small ellipse, expands to full — higher scrub for velvet feel
        gsap.fromTo(gateClip,
          { clipPath: 'ellipse(8% 18% at 50% 55%)' },
          {
            clipPath: 'ellipse(80% 80% at 50% 50%)',
            ease: 'none',
            scrollTrigger: {
              trigger: gateSection,
              start: 'top 80%',
              end: '60% center',
              scrub: 2
            }
          }
        );

        // Gate text reveal — both paragraphs
        const gateTexts = gateSection.querySelectorAll('.text-reveal');
        gateTexts.forEach((gateText, i) => {
          const chars = splitTextIntoChars(gateText);
          gsap.from(chars, {
            opacity: 0, y: 15,
            stagger: 0.016,
            duration: 0.9,
            ease: easeSoft,
            delay: i * 0.5,
            scrollTrigger: {
              trigger: gateSection,
              start: 'top 40%',
              toggleActions: 'play none none none'
            }
          });
        });


        /* ─── STORY: Courtyard ─── */
        const storySection = document.querySelector('.section--story');

        // Title — 글자별 스르르 등장 (Michael Aust 스타일)
        storySection.querySelectorAll('.mixed-title .split-line').forEach((line, i) => {
          const chars = splitTextIntoChars(line);
          gsap.from(chars, {
            y: 40, opacity: 0,
            stagger: 0.03,
            duration: 1.2,
            ease: easeSoft,
            delay: i * 0.15,
            scrollTrigger: {
              trigger: storySection,
              start: 'top 75%',
              toggleActions: 'play none none none'
            }
          });
        });

        // Story body text
        const storyBody = storySection.querySelector('.text-reveal');
        if (storyBody) {
          gsap.from(storyBody, {
            y: 35, opacity: 0,
            duration: 1.6,
            ease: easeSoft,
            scrollTrigger: {
              trigger: storyBody,
              start: 'top 82%',
              toggleActions: 'play none none none'
            }
          });
        }

        // Images reveal with smooth entrance
        gsap.from('.story__img-wrap--01', {
          y: 60, opacity: 0,
          duration: 1.6,
          ease: easeSoft,
          scrollTrigger: {
            trigger: '.story__images',
            start: 'top 88%',
            toggleActions: 'play none none none'
          }
        });

        gsap.from('.story__img-wrap--02', {
          y: 90, opacity: 0,
          duration: 1.8,
          ease: easeSoft,
          scrollTrigger: {
            trigger: '.story__images',
            start: 'top 88%',
            toggleActions: 'play none none none'
          }
        });

        // Parallax on scroll — higher scrub for silk-like movement
        gsap.to('.story__img-wrap--01 .story__img', {
          yPercent: -6,
          ease: 'none',
          scrollTrigger: {
            trigger: storySection,
            start: 'top bottom',
            end: 'bottom top',
            scrub: 2
          }
        });

        gsap.to('.story__img-wrap--02 .story__img', {
          yPercent: -12,
          ease: 'none',
          scrollTrigger: {
            trigger: storySection,
            start: 'top bottom',
            end: 'bottom top',
            scrub: 2
          }
        });


        /* ─── HORIZONTAL SCROLL ─── */
        const horizontalSection = document.querySelector('.section--horizontal');
        const track = document.querySelector('.horizontal__track');
        const panels = gsap.utils.toArray('.horizontal__panel');

        const getScrollWidth = () => track.scrollWidth - window.innerWidth;

        // 타임라인: [수평 이동 → 마지막 패널 슬라이드 아웃]
        // duration 비율 1 : 0.3 : 0.4
        // 1   = 수평 이동
        // 0.3 = 마지막 패널 홀드 (잠시 머무는 구간)
        // 0.4 = 마지막 패널 콘텐츠 위로 슬라이드 아웃
        const lastPanel = panels[panels.length - 1];
        const lastPanelText = lastPanel ? lastPanel.querySelector('.panel__text') : null;
        const lastPanelImg = lastPanel ? lastPanel.querySelector('.panel__image') : null;

        const horizontalTl = gsap.timeline({
          scrollTrigger: {
            trigger: horizontalSection,
            start: 'top top',
            end: () => `+=${getScrollWidth() * 1.7}`,
            scrub: 1.8,
            pin: true,
            anticipatePin: 1,
            invalidateOnRefresh: true,

            // 자석 효과 — Chambre Seconde 슬라이드 아웃 후 Spa 섹션으로 부드럽게 당김
            onLeave: () => {
              lenis.scrollTo('#retreat', {
                duration: 1.2,
                force: true,
                easing: (t) => 1 - Math.pow(1 - t, 4)
              });
            }
          }
        });

        horizontalTl
          .to(track, {
            x: () => -getScrollWidth(),
            ease: 'none',
            duration: 1
          })
          .to({}, { duration: 0.3 }); // 마지막 패널에서 잠시 머무는 구간

        // 마지막 패널 콘텐츠 슬라이드 아웃 (위로 밀려나감)
        if (lastPanelText) {
          horizontalTl.to(lastPanelText, {
            yPercent: -80,
            opacity: 0,
            ease: 'power2.in',
            duration: 0.4
          }, '>-0.05');
        }
        if (lastPanelImg) {
          horizontalTl.to(lastPanelImg, {
            scale: 1.15,
            opacity: 0.3,
            ease: 'power2.in',
            duration: 0.4
          }, '<');
        }

        // Panel text reveals
        panels.forEach((panel) => {
          const textReveals = panel.querySelectorAll('.text-reveal');
          const titles = panel.querySelectorAll('.section-title .split-line, .panel__name');

          titles.forEach(title => {
            if (title.classList.contains('split-line')) {
              const words = splitLineWords(title);
              gsap.from(words, {
                y: 45, opacity: 0,
                stagger: 0.06,
                duration: 1.4,
                ease,
                scrollTrigger: {
                  trigger: panel,
                  containerAnimation: horizontalTl,
                  start: 'left 70%',
                  toggleActions: 'play none none none'
                }
              });
            } else {
              gsap.from(title, {
                y: 35, opacity: 0,
                duration: 1.4,
                ease: easeSoft,
                scrollTrigger: {
                  trigger: panel,
                  containerAnimation: horizontalTl,
                  start: 'left 70%',
                  toggleActions: 'play none none none'
                }
              });
            }
          });

          textReveals.forEach(tr => {
            gsap.from(tr, {
              y: 25, opacity: 0,
              duration: 1.6,
              ease: easeSoft,
              scrollTrigger: {
                trigger: panel,
                containerAnimation: horizontalTl,
                start: 'left 60%',
                toggleActions: 'play none none none'
              }
            });
          });
        });

        // Floating details — asymmetric parallax, silk-like drift (horizontal panels only)
        document.querySelectorAll('.horizontal__panel .floating-detail').forEach((detail, i) => {
          const direction = i % 2 === 0 ? 1 : -1;
          gsap.to(detail, {
            yPercent: -25 * direction,
            xPercent: 12 * direction,
            rotation: 1.5 * direction,
            ease: 'none',
            scrollTrigger: {
              trigger: detail.closest('.horizontal__panel'),
              containerAnimation: horizontalTl,
              start: 'left right',
              end: 'right left',
              scrub: 2.5
            }
          });
        });

        // Subtle image zoom within each panel
        panels.forEach(panel => {
          const img = panel.querySelector('.panel__image');
          if (img) {
            gsap.fromTo(img,
              { scale: 1.08 },
              {
                scale: 1,
                ease: 'none',
                scrollTrigger: {
                  trigger: panel,
                  containerAnimation: horizontalTl,
                  start: 'left right',
                  end: 'right left',
                  scrub: 2
                }
              }
            );
          }
        });


        /* ─── SPA: Vertical section ─── */
        const spaSection = document.querySelector('.section--spa');

        // Spa hero text — 글자별 스르르 등장
        spaSection.querySelectorAll('.spa__hero-text .mixed-title .split-line').forEach((line, i) => {
          const chars = splitTextIntoChars(line);
          gsap.from(chars, {
            y: 50, opacity: 0,
            stagger: 0.03,
            duration: 1.2,
            ease: easeSoft,
            delay: i * 0.2,
            scrollTrigger: {
              trigger: '.spa__hero',
              start: 'top 50%',
              toggleActions: 'play none none none'
            }
          });
        });

        gsap.from('.spa__hero-text .text-reveal', {
          y: 25, opacity: 0,
          duration: 1.6,
          ease: easeSoft,
          scrollTrigger: {
            trigger: '.spa__hero',
            start: 'top 45%',
            toggleActions: 'play none none none'
          }
        });

        // Dual images — uniform reveal
        gsap.from('.spa__dual-item .spa__dual-image-wrap', {
          y: 60, opacity: 0,
          duration: 1.6,
          ease: easeSoft,
          scrollTrigger: {
            trigger: '.spa__dual',
            start: 'top 80%',
            toggleActions: 'play none none none'
          }
        });

        // Add dynamic zoom out to images inside the wraps
        gsap.from('.spa__dual-item .spa__dual-image', {
          scale: 1.15,
          duration: 2.0,
          ease: 'power2.out',
          scrollTrigger: {
            trigger: '.spa__dual',
            start: 'top 80%',
            toggleActions: 'play none none none'
          }
        });



        gsap.from('.spa__dual-text', {
          y: 20, opacity: 0,
          duration: 1.4,
          ease: easeSoft,
          delay: 0.8,
          scrollTrigger: {
            trigger: '.spa__dual',
            start: 'top 80%',
            toggleActions: 'play none none none'
          }
        });

        // Spa floating detail — reveal and parallax
        const spaDualWrap = document.querySelector('.section--spa-dual-wrap');
        const spaFloat = spaDualWrap ? spaDualWrap.querySelector('.floating-detail--03') : null;
        if (spaFloat) {
          gsap.from(spaFloat, {
            y: 40, opacity: 0,
            duration: 1.5,
            ease: easeSoft,
            delay: 1.0,
            scrollTrigger: {
              trigger: '.spa__dual',
              start: 'top 80%',
              toggleActions: 'play none none none'
            }
          });

          gsap.to(spaFloat, {
            yPercent: -20,
            rotation: 3,
            ease: 'none',
            scrollTrigger: {
              trigger: spaDualWrap,
              start: 'top bottom',
              end: 'bottom top',
              scrub: 2.5
            }
          });
        }


        /* ─── SHUTTER: Silence on Water → Le Bain 전환 ─── */
        // Silence on Water가 고정된 상태에서 스크롤하면
        // 셔터가 왼쪽→오른쪽으로 닫히고,
        // Le Bain 위에서 셔터가 열리며 Le Bain이 드러남
        const shutterOverlay = document.querySelector('.shutter-overlay');
        if (shutterOverlay) {

          // Step 1: Silence on Water 고정 + 체류 후 셔터 닫힘
          // 타임라인 구성: [체류 0.4] + [오버레이 on 0.01] + [셔터 닫힘 1.0]
          // → 총 duration ~1.41 중 앞 28%는 아무것도 안 함 (체류감)
          const shutterCloseTl = gsap.timeline({
            scrollTrigger: {
              trigger: '.section--spa',
              start: 'top top',
              end: () => `+=${window.innerHeight * 1.0}`,
              scrub: 0.8,
              pin: true,
            }
          });

          // 체류 구간 — 화면이 멈춰있는 상태에서 잠시 머무름
          shutterCloseTl.to({}, { duration: 0.4 });

          // 오버레이 보이게
          shutterCloseTl.to(shutterOverlay, {
            autoAlpha: 1,
            duration: 0.01,
          });

          // 셔터 닫힘 — strips가 왼쪽에서 오른쪽으로 scaleX 0→1
          shutterCloseTl.to('.shutter-overlay .shutter', {
            scaleX: 1,
            duration: 1,
            stagger: {
              each: 0.025,
              from: 'start'
            },
            ease: 'power2.inOut',
          });

          // Step 2: Le Bain 고정 + 셔터 열림
          // (pin을 짧게 유지해 셔터가 열리는 동안 Le Bain을 붙잡아 둠)
          const shutterOpenTl = gsap.timeline({
            scrollTrigger: {
              trigger: '.section--lebain',
              start: 'top top',
              end: () => `+=${window.innerHeight * 0.5}`,
              scrub: 0.6,
              pin: true,
            }
          });

          // 셔터 열림 — strips가 왼쪽에서 오른쪽으로 scaleX 1→0
          shutterOpenTl.to('.shutter-overlay .shutter', {
            scaleX: 0,
            duration: 1,
            stagger: {
              each: 0.022,
              from: 'start'
            },
            ease: 'power2.inOut',
          });

          // 오버레이 숨기기
          shutterOpenTl.to(shutterOverlay, {
            autoAlpha: 0,
            duration: 0.01,
          });
        }


        /* ─── LE BAIN: Vertical section ─── */
        const lebainSection = document.querySelector('.section--lebain');



        // Text reveal
        gsap.from('.lebain__text .panel__name', {
          y: 35, opacity: 0,
          duration: 1.4,
          ease: easeSoft,
          scrollTrigger: {
            trigger: lebainSection,
            start: 'top 50%',
            toggleActions: 'play none none none'
          }
        });

        gsap.from('.lebain__text .text-reveal', {
          y: 25, opacity: 0,
          duration: 1.6,
          ease: easeSoft,
          delay: 0.2,
          scrollTrigger: {
            trigger: lebainSection,
            start: 'top 50%',
            toggleActions: 'play none none none'
          }
        });


        /* ─── OUTRO: Day-to-Night Crossfade (디졸브 효과 강화) ─── */
        const outroSection = document.querySelector('.section--outro');
        const outroDay = document.querySelector('.outro__day');
        const outroNight = document.querySelector('.outro__night');

        // 낮 풍경이 서서히 어두워짐 (opacity 1 → 0.3)
        gsap.fromTo(outroDay,
          { opacity: 1 },
          {
            opacity: 0.3,
            ease: 'none',
            scrollTrigger: {
              trigger: outroSection,
              start: 'top bottom',
              end: 'center center',
              scrub: 2
            }
          }
        );

        // 블루아워가 서서히 나타남 (opacity 0 → 1)
        gsap.fromTo(outroNight,
          { opacity: 0 },
          {
            opacity: 1,
            ease: 'none',
            scrollTrigger: {
              trigger: outroSection,
              start: 'top 80%',
              end: 'center 30%',
              scrub: 2
            }
          }
        );

        // Outro content — staggered gentle entrance
        gsap.from('.outro__logo', {
          y: 25, opacity: 0,
          duration: 1.8,
          ease: easeSoft,
          scrollTrigger: {
            trigger: outroSection,
            start: 'top 45%',
            toggleActions: 'play none none none'
          }
        });

        const outroTagline = outroSection.querySelector('.text-reveal');
        if (outroTagline) {
          gsap.from(outroTagline, {
            y: 25, opacity: 0,
            duration: 1.8,
            ease: easeSoft,
            delay: 0.4,
            scrollTrigger: {
              trigger: outroSection,
              start: 'top 45%',
              toggleActions: 'play none none none'
            }
          });
        }

        gsap.from('.outro__reserve', {
          y: 15, opacity: 0,
          duration: 1.4,
          ease: easeSoft,
          delay: 0.8,
          scrollTrigger: {
            trigger: outroSection,
            start: 'top 45%',
            toggleActions: 'play none none none'
          }
        });


        /* ─── AMENITIES ─── */
        const amenitiesSection = document.querySelector('.section--amenities');
        if (amenitiesSection) {
          gsap.from('.amenities__eyebrow, .amenities__divider', {
            y: 20, opacity: 0,
            duration: 1.2,
            stagger: 0.15,
            ease: easeSoft,
            scrollTrigger: {
              trigger: amenitiesSection,
              start: 'top 80%',
              toggleActions: 'play none none none'
            }
          });

          gsap.from('.amenity-item', {
            y: 24, opacity: 0,
            duration: 1.0,
            stagger: 0.09,
            ease: easeSoft,
            scrollTrigger: {
              trigger: '.amenities__list',
              start: 'top 82%',
              toggleActions: 'play none none none'
            }
          });

          gsap.from('.amenities__capacity', {
            y: 16, opacity: 0,
            duration: 1.2,
            ease: easeSoft,
            delay: 0.6,
            scrollTrigger: {
              trigger: '.amenities__list',
              start: 'top 82%',
              toggleActions: 'play none none none'
            }
          });
        }


        /* ─── Refresh ScrollTrigger on resize ─── */
        let resizeTimer;
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimer);
          resizeTimer = setTimeout(() => ScrollTrigger.refresh(), 250);
        });

      } // end initAnimations


      /* ═══════════════════════════════════════
         MOBILE MENU
      ═══════════════════════════════════════ */
      const burger = document.querySelector('.nav__burger');
      const mobileMenu = document.querySelector('.mobile-menu');
      const mobileMenuInner = document.querySelector('.mobile-menu__inner');
      const mobileLinks = document.querySelectorAll('.mobile-menu__links a');
      const mobileBrand = document.querySelector('.mobile-menu__brand');
      let menuOpen = false;

      function openMenu() {
        menuOpen = true;
        burger.classList.add('is-active');
        burger.setAttribute('aria-expanded', 'true');
        mobileMenu.classList.add('is-open');
        mobileMenu.setAttribute('aria-hidden', 'false');
        lenis.stop();

        const tl = gsap.timeline();

        // Slide in the panel
        tl.to(mobileMenuInner, {
          x: 0,
          duration: 0.8,
          ease: 'power4.out'
        });

        // Stagger menu links
        tl.to(mobileLinks, {
          x: 0,
          opacity: 1,
          duration: 0.6,
          stagger: 0.08,
          ease: 'power3.out'
        }, '-=0.4');

        // Brand fade in
        tl.to(mobileBrand, {
          opacity: 1,
          duration: 0.6,
          ease: 'power2.out'
        }, '-=0.3');
      }

      function closeMenu() {
        menuOpen = false;
        burger.classList.remove('is-active');
        burger.setAttribute('aria-expanded', 'false');

        const tl = gsap.timeline({
          onComplete: () => {
            mobileMenu.classList.remove('is-open');
            mobileMenu.setAttribute('aria-hidden', 'true');
            lenis.start();
          }
        });

        // Fade out links
        tl.to(mobileLinks, {
          x: 30,
          opacity: 0,
          duration: 0.3,
          stagger: 0.04,
          ease: 'power2.in'
        });

        tl.to(mobileBrand, {
          opacity: 0,
          duration: 0.3,
          ease: 'power2.in'
        }, '-=0.2');

        // Slide out the panel
        tl.to(mobileMenuInner, {
          x: '100%',
          duration: 0.6,
          ease: 'power3.inOut'
        }, '-=0.2');
      }

      burger.addEventListener('click', () => {
        menuOpen ? closeMenu() : openMenu();
      });

      // Close menu on link click
      mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
          if (menuOpen) closeMenu();
        });
      });


      /* ═══════════════════════════════════════
         CUSTOM CURSOR
      ═══════════════════════════════════════ */
      const cursor = document.querySelector('.cursor-follow');

      // 마우스 위치 추적 — GSAP으로 부드럽게 따라옴
      document.addEventListener('mousemove', (e) => {
        gsap.to(cursor, {
          x: e.clientX,
          y: e.clientY,
          duration: 0.55,
          ease: 'power3.out'
        });
      });

      // 커서가 활성화될 영역: 이미지 섹션들
      const cursorZones = document.querySelectorAll(
        '.section--story, .section--spa, .section--lebain, .outro__images, .horizontal__panel'
      );

      cursorZones.forEach(zone => {
        zone.classList.add('cursor-active-zone');

        zone.addEventListener('mouseenter', () => {
          gsap.to(cursor, {
            scale: 1, opacity: 1,
            duration: 0.4, ease: 'power3.out'
          });
        });

        zone.addEventListener('mouseleave', () => {
          gsap.to(cursor, {
            scale: 0, opacity: 0,
            duration: 0.25, ease: 'power3.in'
          });
        });
      });

      // 모바일에서는 커서 숨김
      if ('ontouchstart' in window) {
        cursor.style.display = 'none';
      }

    }); // end DOMContentLoaded
  </script>

</body>

</html>